<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>CaseRage</title>
    <style>
        body { background: #1c1c1e; color: white; font-family: sans-serif; text-align: center; margin: 0; padding-top: 50px; }
        #balance_display { font-size: 32px; color: #ffd60a; margin-bottom: 20px; font-weight: bold; }
        .window { position: relative; width: 300px; height: 100px; border: 3px solid #3a3a3c; margin: 0 auto; overflow: hidden; background: #2c2c2e; border-radius: 10px; }
        .line { position: absolute; left: 50%; width: 2px; height: 100%; background: red; z-index: 10; margin-left: -1px; }
        #tape { display: flex; position: absolute; left: 0; top: 10px; transition: transform 5s cubic-bezier(0.1, 0, 0.1, 1); }
        .item { min-width: 80px; height: 80px; margin: 0 5px; background: #3a3a3c; display: flex; align-items: center; justify-content: center; font-weight: bold; border-radius: 5px; flex-direction: column; }
        button { margin-top: 30px; padding: 15px 30px; font-size: 18px; cursor: pointer; background: #30d158; border: none; color: white; border-radius: 10px; font-weight: bold; }
        button:disabled { background: #555; }
    </style>
</head>
<body>

    <div id="balance_display">1000 ‚≠êÔ∏è</div>

    <div class="window">
        <div class="line"></div>
        <div id="tape"></div>
    </div>

    <button id="spin_button" onclick="startSpin()">–ö–†–£–¢–ò–¢–¨ (100 ‚≠êÔ∏è)</button>

    <script>
        // 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–≥—Ä—ã
        var myBalance = 1000;
        var isSpinning = false;
        var itemsData = [
            {n: "0", v: 0, i: "üí©"},
            {n: "20", v: 20, i: "üí∞"},
            {n: "100", v: 100, i: "üíµ"},
            {n: "500", v: 500, i: "üíé"},
            {n: "1000", v: 1000, i: "üëë"}
        ];

        // 2. –§—É–Ω–∫—Ü–∏—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –ª–µ–Ω—Ç—ã
        function buildTape() {
            var tape = document.getElementById('tape');
            tape.innerHTML = '';
            tape.style.transition = 'none';
            tape.style.transform = 'translateX(0)';
            
            // –°–æ–∑–¥–∞–µ–º 80 –ø—Ä–µ–¥–º–µ—Ç–æ–≤
            for (var i = 0; i < 80; i++) {
                var randomItem = itemsData[Math.floor(Math.random() * itemsData.length)];
                var div = document.createElement('div');
                div.className = 'item';
                div.innerHTML = '<span>'+randomItem.i+'</span>' + randomItem.n;
                div.setAttribute('data-value', randomItem.v);
                tape.appendChild(div);
            }
        }

        // 3. –ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∫—Ä—É—Ç–∫–∏
        function startSpin() {
            if (isSpinning) return;
            if (myBalance < 100) {
                alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–µ–Ω–µ–≥!");
                return;
            }

            // –£–±–∞–≤–ª—è–µ–º –±–∞–ª–∞–Ω—Å —Å—Ä–∞–∑—É
            myBalance = myBalance - 100;
            document.getElementById('balance_display').innerHTML = myBalance + " ‚≠êÔ∏è";
            
            isSpinning = true;
            document.getElementById('spin_button').disabled = true;

            var tape = document.getElementById('tape');
            var winnerIndex = 60; // –í—ã–±–∏—Ä–∞–µ–º 60-–π –ø—Ä–µ–¥–º–µ—Ç –∫–∞–∫ –ø–æ–±–µ–¥–∏—Ç–µ–ª—è
            var moveX = (winnerIndex * 90) - 110; // 90 - —ç—Ç–æ —à–∏—Ä–∏–Ω–∞ –∞–π—Ç–µ–º–∞ —Å –æ—Ç—Å—Ç—É–ø–∞–º–∏

            tape.style.transition = 'transform 5s cubic-bezier(0.1, 0, 0.1, 1)';
            tape.style.transform = 'translateX(-' + moveX + 'px)';

            // –ñ–¥–µ–º –æ–∫–æ–Ω—á–∞–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–∏
            setTimeout(function() {
                var winValue = parseInt(tape.children[winnerIndex].getAttribute('data-value'));
                
                // –ü—Ä–∏–±–∞–≤–ª—è–µ–º –≤—ã–∏–≥—Ä—ã—à
                myBalance = myBalance + winValue;
                document.getElementById('balance_display').innerHTML = myBalance + " ‚≠êÔ∏è";
                
                alert("–í—ã–ø–∞–ª–æ: " + winValue);
                
                isSpinning = false;
                document.getElementById('spin_button').disabled = false;
                buildTape(); // –ü–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ–º –ª–µ–Ω—Ç—É
            }, 5500);
        }

        // –ó–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        buildTape();
    </script>
</body>
</html>
