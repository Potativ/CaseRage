<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CaseRage - –û—Ç–∫—Ä—ã–≤–∞–π –∫–µ–π—Å—ã</title>
    <style>
        body {
            background-color: #1c1c1e;
            color: white;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
            user-select: none;
        }

        #balance {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 20px;
            color: #ffd60a;
            text-shadow: 0 0 10px rgba(255, 214, 10, 0.3);
        }

        .case-container {
            position: relative;
            width: 100%;
            max-width: 500px;
            height: 150px;
            border: 2px solid #3a3a3c;
            background: #2c2c2e;
            overflow: hidden;
            border-radius: 15px;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.5);
        }

        .pointer {
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 4px;
            background: #ff453a;
            z-index: 10;
            transform: translateX(-50%);
            box-shadow: 0 0 15px rgba(255, 69, 58, 0.8);
        }

        .tape {
            display: flex;
            position: absolute;
            left: 0;
            top: 25px;
            will-change: transform;
        }

        .item {
            min-width: 100px;
            height: 100px;
            margin: 0 5px;
            background: #3a3a3c;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
            font-size: 14px;
            font-weight: bold;
            text-align: center;
        }

        /* –¶–≤–µ—Ç–∞ —Ä–µ–¥–∫–æ—Å—Ç–∏ */
        .common { border-bottom: 4px solid #8e8e93; }
        .rare { border-bottom: 4px solid #5e5ce6; color: #5e5ce6; }
        .epic { border-bottom: 4px solid #af52de; color: #af52de; }
        .legendary { border-bottom: 4px solid #ffd60a; color: #ffd60a; }

        .item-icon {
            font-size: 30px;
            margin-bottom: 5px;
        }

        button {
            margin-top: 30px;
            padding: 16px 50px;
            font-size: 18px;
            background: #30d158;
            border: none;
            border-radius: 16px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: 0.2s;
            box-shadow: 0 4px 15px rgba(48, 209, 88, 0.4);
        }

        button:active { transform: scale(0.95); }
        button:disabled { 
            background: #555; 
            box-shadow: none;
            transform: scale(1);
        }

        .info {
            margin-top: 15px;
            font-size: 12px;
            color: #8e8e93;
        }
    </style>
</head>
<body>

    <h1>CaseRage üì¶</h1>
    <div id="balance">–ë–∞–ª–∞–Ω—Å: 1000 ‚≠êÔ∏è</div>

    <div class="case-container">
        <div class="pointer"></div>
        <div id="tape" class="tape"></div>
    </div>

    <button onclick="spin()" id="spinBtn">–ö–†–£–¢–ò–¢–¨ –ó–ê 100 ‚≠êÔ∏è</button>
    <p class="info">–ü—Ä–æ–≥—Ä–µ—Å—Å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ —ç—Ç–æ–º –±—Ä–∞—É–∑–µ—Ä–µ</p>

    <script>
        const tape = document.getElementById('tape');
        const balanceElement = document.getElementById('balance');
        const spinBtn = document.getElementById('spinBtn');

        // –°–ø–∏—Å–æ–∫ –ø—Ä–µ–¥–º–µ—Ç–æ–≤: –≠–º–æ–¥–∑–∏, –ù–∞–∑–≤–∞–Ω–∏–µ, –ù–∞–≥—Ä–∞–¥–∞ (—á–∏—Å–ª–æ), –†–µ–¥–∫–æ—Å—Ç—å
        const itemsList = [
            { name: '10 ‚≠êÔ∏è', val: 10, color: 'common', img: 'üí∞' },
            { name: '30 ‚≠êÔ∏è', val: 30, color: 'common', img: 'üí∞' },
            { name: '80 ‚≠êÔ∏è', val: 80, color: 'rare', img: 'üíé' },
            { name: '150 ‚≠êÔ∏è', val: 150, color: 'rare', img: 'üíµ' },
            { name: '500 ‚≠êÔ∏è', val: 500, color: 'epic', img: 'üî•' },
            { name: '2000 ‚≠êÔ∏è', val: 2000, color: 'legendary', img: 'üëë' },
            { name: '0 ‚≠êÔ∏è', val: 0, color: 'common', img: 'üí©' }
        ];

        let balance = parseInt(localStorage.getItem('caserage_balance')) || 1000;
        const spinPrice = 100;

        function updateUI() {
            balanceElement.innerText = `–ë–∞–ª–∞–Ω—Å: ${balance} ‚≠êÔ∏è`;
            localStorage.setItem('caserage_balance', balance);
        }

        function renderItems() {
            tape.innerHTML = '';
            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º 100 –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –¥–ª—è –¥–æ–ª–≥–æ–π –ø—Ä–æ–∫—Ä—É—Ç–∫–∏
            for (let i = 0; i < 100; i++) {
                const itemData = itemsList[Math.floor(Math.random() * itemsList.length)];
                const div = document.createElement('div');
                div.className = `item ${itemData.color}`;
                div.setAttribute('data-reward', itemData.val);
                div.innerHTML = `<div class="item-icon">${itemData.img}</div><div>${itemData.name}</div>`;
                tape.appendChild(div);
            }
        }

        function spin() {
            if (balance < spinPrice) {
                alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∑–≤–µ–∑–¥! ‚≠êÔ∏è');
                return;
            }

            // –°–ø–∏—Å—ã–≤–∞–µ–º –±–∞–ª–∞–Ω—Å
            balance -= spinPrice;
            updateUI();

            spinBtn.disabled = true;
            
            const itemWidth = 110; // —à–∏—Ä–∏–Ω–∞ –ø—Ä–µ–¥–º–µ—Ç–∞ + –æ—Ç—Å—Ç—É–ø—ã
            const winnerIndex = 70 + Math.floor(Math.random() * 20); // –°–ª—É—á–∞–π–Ω—ã–π –ø–æ–±–µ–¥–∏—Ç–µ–ª—å –≤ –∫–æ–Ω—Ü–µ –ª–µ–Ω—Ç—ã
            const offset = (winnerIndex * itemWidth) - (tape.parentElement.offsetWidth / 2) + (itemWidth / 2);

            // –°–±—Ä–æ—Å –ø–æ–∑–∏—Ü–∏–∏ –±–µ–∑ –∞–Ω–∏–º–∞—Ü–∏–∏
            tape.style.transition = 'none';
            tape.style.transform = 'translateX(0)';

            // –ó–∞–ø—É—Å–∫ –∞–Ω–∏–º–∞—Ü–∏–∏
            setTimeout(() => {
                tape.style.transition = 'transform 5s cubic-bezier(0.15, 0, 0.15, 1)';
                tape.style.transform = `translateX(-${offset}px)`;
            }, 50);

            // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
            setTimeout(() => {
                const winnerNode = tape.children[winnerIndex];
                const reward = parseInt(winnerNode.getAttribute('data-reward'));

                balance += reward;
                updateUI();

                if (reward > spinPrice) {
                    alert(`–ü–æ–±–µ–¥–∞! –í—ã –≤—ã–∏–≥—Ä–∞–ª–∏ ${reward} ‚≠êÔ∏è`);
                } else if (reward === 0) {
                    alert('–£–ø—Å! –ü—É—Å—Ç–æ–π –∫–µ–π—Å üí©');
                } else {
                    alert(`–í—ã–ø–∞–ª–æ: ${reward} ‚≠êÔ∏è`);
                }

                spinBtn.disabled = false;
                renderItems(); // –ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –ª–µ–Ω—Ç—É –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ —Ä–∞–∑–∞
            }, 5500);
        }

        // –°—Ç–∞—Ä—Ç
        updateUI();
        renderItems();
    </script>
</body>
</html>
